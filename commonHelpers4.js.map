{"version":3,"file":"commonHelpers4.js","sources":["../src/js/task-8-3/lightbox-slider-interface.js","../src/js/task-8-3/lightbox-buttons-handles.js"],"sourcesContent":["import Slider from '../common/slider.js';\n\nclass LightboxSliderInterface {\n  #sliderRef;\n  #prevBtn;\n  #nextBtn;\n  #sliderContent;\n  #slidesCount;\n  #elementsList;\n\n  constructor(indexList, elementsList, lightboxRef) {\n    this.#sliderRef = new Slider(indexList, 1, elementsList.length);\n\n    this.#prevBtn = lightboxRef\n      .element()\n      .querySelector('#prev-lightbox-button');\n    this.#nextBtn = lightboxRef\n      .element()\n      .querySelector('#next-lightbox-button');\n    this.#sliderContent = lightboxRef\n      .element()\n      .querySelector('.lightbox-image');\n    this.#slidesCount = lightboxRef\n      .element()\n      .querySelector('.lightbox-counter');\n\n    this.#elementsList = elementsList;\n    this.initBtnsFunction();\n    this.update();\n  }\n\n  update() {\n    this.updateContent();\n    this.updateButtons();\n    this.updateCounter();\n  }\n\n  destroy() {\n    this.#prevBtn.removeEventListener('click', this.onPrevBtnClick.bind(this));\n    this.#nextBtn.removeEventListener('click', this.onNextBtnClick.bind(this));\n  }\n\n  initBtnsFunction() {\n    this.#prevBtn.addEventListener('click', this.onPrevBtnClick.bind(this));\n    this.#nextBtn.addEventListener('click', this.onNextBtnClick.bind(this));\n  }\n\n  updateContent() {\n    const slideNumber = this.#sliderRef.currentSlide;\n    const imgRef = this.#elementsList[slideNumber].querySelector('img');\n\n    this.#sliderContent.src = imgRef.dataset.source;\n    this.#sliderContent.alt = imgRef.alt;\n  }\n\n  updateButtons() {\n    this.#prevBtn.disabled = this.#sliderRef.isExistPrev();\n    this.#nextBtn.disabled = this.#sliderRef.isExistNext();\n  }\n\n  updateCounter() {\n    this.#slidesCount.textContent = `${\n      this.#sliderRef.currentSlide + 1 + '/' + this.#elementsList.length\n    }`;\n  }\n  onPrevBtnClick() {\n    this.#sliderRef.onPrevSlide();\n    this.update();\n  }\n\n  onNextBtnClick() {\n    this.#sliderRef.onNextSlide();\n    this.update();\n  }\n}\n\nexport default LightboxSliderInterface;\n","import * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\n\nimport { KEY_CODE_ESC } from '../common/constants.js';\nimport createGallery from '../common/create-gallery.js';\nimport images from '../data/gallery-images.js';\n\nimport LightboxSliderInterface from './lightbox-slider-interface.js';\nimport iconsUrl from '../../img/icons.svg';\n\nconst galleryRef = document.querySelector('.gallery');\ncreateGallery(images, galleryRef);\ngalleryRef.addEventListener('click', onImageClick);\n\nlet modalWindowRef = null;\n\nfunction onImageClick(event) {\n  const targetRef = event.target;\n  const isImageRef = targetRef.classList.contains('gallery-img');\n  if (!isImageRef) {\n    return;\n  }\n  event.preventDefault();\n\n  const closestLi = targetRef.closest('.gallery-item');\n  const listImages = event.currentTarget.children;\n  const indexList = Array.from(listImages).indexOf(closestLi);\n\n  openModalWindow(listImages, indexList);\n}\n\nfunction openModalWindow(listImages, indexList) {\n  modalWindowRef = basicLightbox.create(createLightboxMarkup(), {\n    onShow: instance => {\n      document.addEventListener('keydown', onKeydown);\n\n      const lightboxCloseBtn = instance\n        .element()\n        .querySelector('.lightbox-close');\n      lightboxCloseBtn.addEventListener('click', instance.close);\n\n      const lightboxSlider = new LightboxSliderInterface(\n        indexList,\n        listImages,\n        instance\n      );\n    },\n    onClose: instance => {\n      document.removeEventListener('keydown', onKeydown);\n    },\n    closable: true,\n  });\n  modalWindowRef.show();\n}\n\nfunction onKeydown(event) {\n  if (event.code === KEY_CODE_ESC) {\n    modalWindowRef.close();\n  }\n}\n\nfunction createLightboxMarkup() {\n  return `\n  <div class=\"lightbox-modal\">\n      <p class=\"lightbox-counter\"></p>  \n      <button\n        class=\"lightbox-close\"\n        type=\"button\"\n        id=\"id-lightbox-close\"\n      >\n        <svg class=\"lightbox-close-icon\" width=\"16\" height=\"16\">\n          <use href=\"${iconsUrl}#close-form\"></use>\n        </svg>\n      </button>\n      <div class=\"lightbox-slider\">\n\n        <button\n          class=\"lightbox-button\"\n          id=\"prev-lightbox-button\"\n          type=\"button\">\n          <svg\n            class=\"lightbox-button-icon-prev\"\n            width=\"24\"\n            height=\"24\"\n            aria-label=\"icon arrow left\"\n          >\n            <use href=\"${iconsUrl}#icon-chevron-left\"></use>\n          </svg>\n        </button>\n\n        <img class=\"lightbox-image\" src=\"\" alt=\"\" width=\"1112\" height=\"640\"/>           \n          \n        <button\n          class=\"lightbox-button\"\n          id=\"next-lightbox-button\"\n          type=\"button\">\n          <svg\n            class=\"lightbox-button-icon-next\"\n            width=\"24\"\n            height=\"24\"\n            aria-label=\"icon arrow right\"\n          >\n            <use href=\"${iconsUrl}#icon-chevron-right\"></use>\n          </svg> \n        </button>\n      </div>\n    </div>`;\n}\n"],"names":["LightboxSliderInterface","indexList","elementsList","lightboxRef","__privateAdd","_sliderRef","_prevBtn","_nextBtn","_sliderContent","_slidesCount","_elementsList","__privateSet","Slider","__privateGet","slideNumber","imgRef","galleryRef","createGallery","images","onImageClick","modalWindowRef","event","targetRef","closestLi","listImages","openModalWindow","basicLightbox.create","createLightboxMarkup","instance","onKeydown","KEY_CODE_ESC","iconsUrl"],"mappings":"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"}