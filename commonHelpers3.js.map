{"version":3,"file":"commonHelpers3.js","sources":["../src/js/task-8-2/lightbox-handles.js"],"sourcesContent":["import * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\n\nimport { KEY_CODE_ESC } from '../common/constants.js';\nimport createGallery from '../common/create-gallery.js';\nimport images from '../data/gallery-images.js';\n\nlet modalWindowRef = {};\n\nconst galleryRef = document.querySelector('.gallery');\ncreateGallery(images, galleryRef);\ngalleryRef.addEventListener('click', onImageClick);\n\nfunction onImageClick(event) {\n  const targetRef = event.target;\n  const isImageRef = targetRef.classList.contains('gallery-img');\n  if (!isImageRef) {\n    return;\n  }\n  event.preventDefault();\n\n  const imageSrc = {\n    src: targetRef.dataset.source,\n    alt: targetRef.alt,\n    preview: targetRef.src,\n  };\n\n  openModalWindow(imageSrc);\n}\n\nfunction openModalWindow({ src, alt }) {\n  modalWindowRef = basicLightbox.create(\n    `<div class=\"lightbox-modal\">   \n        <img class=\"lightbox-image\" src=\"${src}\" alt=\"${alt}\"/>           \n    </div>`,\n    {\n      onShow: () => {\n        document.addEventListener('keydown', onKeydown);\n      },\n      onClose: () => {\n        document.removeEventListener('keydown', onKeydown);\n      },\n      closable: true,\n    }\n  );\n  modalWindowRef.show();\n}\n\nfunction onKeydown(event) {\n  if (event.code === KEY_CODE_ESC) {\n    modalWindowRef.close();\n  }\n}\n"],"names":["modalWindowRef","galleryRef","createGallery","images","onImageClick","event","targetRef","imageSrc","openModalWindow","src","alt","basicLightbox.create","onKeydown","KEY_CODE_ESC"],"mappings":"+PAOA,IAAIA,EAAiB,CAAA,EAErB,MAAMC,EAAa,SAAS,cAAc,UAAU,EACpDC,EAAcC,EAAQF,CAAU,EAChCA,EAAW,iBAAiB,QAASG,CAAY,EAEjD,SAASA,EAAaC,EAAO,CAC3B,MAAMC,EAAYD,EAAM,OAExB,GAAI,CADeC,EAAU,UAAU,SAAS,aAAa,EAE3D,OAEFD,EAAM,eAAc,EAEpB,MAAME,EAAW,CACf,IAAKD,EAAU,QAAQ,OACvB,IAAKA,EAAU,IACf,QAASA,EAAU,GACvB,EAEEE,EAAgBD,CAAQ,CAC1B,CAEA,SAASC,EAAgB,CAAE,IAAAC,EAAK,IAAAC,GAAO,CACrCV,EAAiBW,EAAoB,OACnC;AAAA,2CACuCF,WAAaC;AAAA,YAEpD,CACE,OAAQ,IAAM,CACZ,SAAS,iBAAiB,UAAWE,CAAS,CAC/C,EACD,QAAS,IAAM,CACb,SAAS,oBAAoB,UAAWA,CAAS,CAClD,EACD,SAAU,EACX,CACL,EACEZ,EAAe,KAAI,CACrB,CAEA,SAASY,EAAUP,EAAO,CACpBA,EAAM,OAASQ,GACjBb,EAAe,MAAK,CAExB"}