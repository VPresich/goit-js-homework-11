{"version":3,"file":"commonHelpers2.js","sources":["../src/js/common/slider-interface.js","../src/js/task-8-1/modal-window-slider.js","../src/js/task-8-1/modal-window-handles.js"],"sourcesContent":["import Slider from \"./slider.js\";\n\nclass SliderInterface {\n  static touchThreshold = 75;\n  #touchStartX = 0;\n  #sliderRef;\n  #prevBtn;\n  #nextBtn;\n  #sliderDots;\n  #slidesCounter;\n  #sliderContent;\n  #dotDefaultClass;\n  #dotActiveClass;\n  #isDotContainText;\n\n  constructor({\n    currentSlide,\n    slidesPerPage,\n    prevBtnId,\n    nextBtnId,\n    dotsContainerId = \"\",\n    sliderContainerId = \"\",\n    slidesCounterId = \"\",\n    dotDefaultClass = \"slider-dot\",\n    dotActiveClass = \"active-dot\",\n    isDotContainText = false,\n    elementsList,\n  }) {\n    this.#sliderRef = new Slider(\n      currentSlide,\n      slidesPerPage,\n      elementsList.length\n    );\n\n    if (prevBtnId) this.#prevBtn = document.getElementById(prevBtnId);\n    if (nextBtnId) this.#nextBtn = document.getElementById(nextBtnId);\n\n    if (dotsContainerId) {\n      this.#sliderDots = document.getElementById(dotsContainerId);\n      this.#dotDefaultClass = dotDefaultClass;\n      this.#dotActiveClass = dotActiveClass;\n      this.#isDotContainText = isDotContainText;\n    }\n\n    if (sliderContainerId)\n      this.#sliderContent = document.getElementById(sliderContainerId);\n\n    if (slidesCounterId)\n      this.#slidesCounter = document.getElementById(slidesCounterId);\n\n    this.init();\n  }\n\n  init() {\n    this.initBtnsFunction();\n    this.#sliderContent && this.initTouchFunction();\n    this.#sliderDots && this.createDots();\n  }\n\n  update() {\n    this.updateContent();\n    this.updateButtons();\n    this.updateDisplayDots();\n    this.updateCounter();\n  }\n\n  destroy() {\n    this.removeBtnsFunction();\n    this.#sliderDots && this.removeDots();\n    this.#sliderContent && this.removeTouchFunction();\n  }\n\n  getCurrentSlide() {\n    return this.#sliderRef.currentSlide;\n  }\n\n  initBtnsFunction() {\n    this.#prevBtn &&\n      this.#prevBtn.addEventListener(\"click\", this.onPrevBtnClick.bind(this));\n    this.#nextBtn &&\n      this.#nextBtn.addEventListener(\"click\", this.onNextBtnClick.bind(this));\n  }\n\n  initTouchFunction() {\n    this.#touchStartX = 0;\n    this.#sliderContent.addEventListener(\n      \"touchstart\",\n      this.onSliderTouchStart.bind(this)\n    );\n\n    this.#sliderContent.addEventListener(\n      \"touchmove\",\n      this.onSliderTouchMove.bind(this)\n    );\n  }\n\n  createDots() {\n    this.#sliderDots.innerHTML = \"\";\n    for (let ind = 0; ind < this.#sliderRef.slidesNumber; ind += 1) {\n      const dot = document.createElement(\"div\");\n      dot.className = this.#dotDefaultClass;\n      dot.dataset.index = ind;\n      if (this.#isDotContainText) dot.textContent = `${ind + 1}`;\n      this.#sliderDots.appendChild(dot);\n    }\n\n    this.#sliderDots.addEventListener(\n      \"click\",\n      this.onSliderDotsClick.bind(this)\n    );\n  }\n\n  updateContent() {\n    console.log(TODO in children);\n  }\n\n  updateButtons() {\n    this.#prevBtn.disabled = this.#sliderRef.isExistPrev();\n    this.#nextBtn.disabled = this.#sliderRef.isExistNext();\n  }\n\n  updateDisplayDots() {\n    const children = this.#sliderDots.children;\n    for (let i = 0; i < children.length; i += 1) {\n      if (i === this.#sliderRef.currentSlide) {\n        children[i].classList.add(this.#dotActiveClass);\n      } else {\n        children[i].classList.remove(this.#dotActiveClass);\n      }\n    }\n  }\n\n  updateCounter() {\n    this.#slidesCounter.textContent = `${\n      this.#sliderRef.currentSlide + 1 + \"/\" + this.#sliderRef.slidesNumber\n    }`;\n  }\n\n  removeBtnsFunction() {\n    this.#prevBtn &&\n      this.#prevBtn.removeEventListener(\n        \"click\",\n        this.onPrevBtnClick.bind(this)\n      );\n    this.#nextBtn &&\n      this.#nextBtn.removeEventListener(\n        \"click\",\n        this.onNextBtnClick.bind(this)\n      );\n  }\n\n  removeDots() {\n    this.#sliderDots.innerHTML = \"\";\n    this.#sliderDots.removeEventListener(\n      \"click\",\n      this.onSliderDotsClick.bind(this)\n    );\n  }\n\n  removeTouchFunction() {\n    this.#sliderContent.removeEventListener(\n      \"touchstart\",\n      this.onSliderTouchStart.bind(this)\n    );\n\n    this.#sliderContent.removeEventListener(\n      \"touchmove\",\n      this.onSliderTouchMove.bind(this)\n    );\n  }\n\n  onPrevBtnClick() {\n    this.#sliderRef.onPrevSlide();\n    this.update();\n  }\n\n  onNextBtnClick() {\n    this.#sliderRef.onNextSlide();\n    this.update();\n  }\n\n  onSliderDotsClick(event) {\n    const dot = event.target;\n    if (dot.classList.contains(this.#dotDefaultClass)) {\n      const index = parseInt(dot.dataset.index, 10);\n      this.#sliderRef.goToSlide(index);\n      this.update();\n    }\n  }\n\n  onSliderTouchStart(event) {\n    this.#touchStartX = event.touches[0].clientX;\n  }\n\n  onSliderTouchMove(event) {\n    const currentX = event.touches[0].clientX;\n    const deltaX = this.#touchStartX - currentX;\n\n    if (deltaX > SliderInterface.touchThreshold) {\n      this.#sliderRef.onNextSlide();\n      this.#touchStartX = currentX;\n      this.update();\n    } else {\n      if (deltaX < -SliderInterface.touchThreshold) {\n        this.#sliderRef.onPrevSlide();\n        this.#touchStartX = currentX;\n        this.update();\n      }\n    }\n  }\n}\n\nexport default SliderInterface;\n","import SliderInterface from '../common/slider-interface.js';\n\nclass ModalWindowSlider extends SliderInterface {\n  #sliderContent;\n  #elementsList;\n\n  constructor(params) {\n    const { elementsList, sliderContent } = params;\n    super(params);\n\n    this.#elementsList = elementsList;\n    this.#sliderContent = sliderContent;\n\n    super.update();\n  }\n\n  destroy() {\n    super.destroy();\n  }\n\n  updateContent() {\n    const slideNumber = super.getCurrentSlide();\n    const imgRef = this.#elementsList[slideNumber].querySelector('img');\n\n    this.#sliderContent.src = imgRef.dataset.source;\n    this.#sliderContent.alt = imgRef.alt;\n  }\n}\n\nexport default ModalWindowSlider;\n","import { KEY_CODE_ESC } from \"../common/constants.js\";\nimport createGallery from '../common/create-gallery.js';\nimport images from \"../data/gallery-images.js\";\nimport ModalWindowSlider from \"./modal-window-slider.js\";\n\nconst refs = {\n  gallery: document.querySelector('.gallery'),\n  modalBackdrop: document.querySelector('.modal-backdrop'),\n  buttonClose: document.querySelector('.close-button'),\n  modalContent: document.querySelector('.modal-content'),\n  modalClose: document.querySelector('#closeBtn'),\n};\n\ncreateGallery(images, refs.gallery);\n\nrefs.gallery.addEventListener(\"click\", onImageClick);\nrefs.buttonClose.addEventListener(\"click\", onCloseModalWindow);\nrefs.modalBackdrop.addEventListener(\"click\", onBackdropClick);\nrefs.modalClose.addEventListener(\"click\", onCloseModalWindow);\n\nlet modalWindowSlider;\nconst dataForSlider = {\n  slidesPerPage: 1,\n  prevBtnId: \"prevBtn\",\n  nextBtnId: \"nextBtn\",\n  dotsContainerId: \"sliderDots\",\n  sliderContainerId: \"modalContent\",\n  slidesCounterId: \"slidesCounter\",\n  dotDefaultClass: \"slider-dot\",\n  dotActiveClass: \"active-dot\",\n  isDotContainText: false,\n  sliderContent: refs.modalContent,\n};\n\nfunction onImageClick(event) {\n  const targetRef = event.target;\n\n  const isImageRef = targetRef.classList.contains('gallery-img');\n  if (!isImageRef) {\n    return;\n  }\n  event.preventDefault();\n\n  const closestLi = targetRef.closest('.gallery-item');\n  const listImages = event.currentTarget.children;\n  const indexList = Array.from(listImages).indexOf(closestLi);\n\n  modalWindowSlider = new ModalWindowSlider({\n    ...dataForSlider,\n    currentSlide: indexList,\n    elementsList: listImages,\n  });\n  \n  openModalWindow();\n}\nfunction openModalWindow() {\n  refs.modalBackdrop.classList.add('is-open');  \n  window.addEventListener('keydown', onWindowKeydown);\n}\n\nfunction onCloseModalWindow(event) {\n  window.removeEventListener('keydown', onWindowKeydown);  \n  refs.modalBackdrop.classList.remove('is-open');\n  modalWindowSlider.destroy();\n}\n\nfunction onWindowKeydown(event) {\n  if (event.code === KEY_CODE_ESC) {\n    onCloseModalWindow(event);\n  }\n}\n\nfunction onBackdropClick(event) {\n  if (event.currentTarget === event.target) {\n    onCloseModalWindow(event);\n  }\n}\n\n"],"names":["_SliderInterface","currentSlide","slidesPerPage","prevBtnId","nextBtnId","dotsContainerId","sliderContainerId","slidesCounterId","dotDefaultClass","dotActiveClass","isDotContainText","elementsList","__privateAdd","_touchStartX","_sliderRef","_prevBtn","_nextBtn","_sliderDots","_slidesCounter","_sliderContent","_dotDefaultClass","_dotActiveClass","_isDotContainText","__privateSet","Slider","__privateGet","ind","dot","children","i","event","index","currentX","deltaX","SliderInterface","__publicField","ModalWindowSlider","params","sliderContent","_elementsList","slideNumber","imgRef","refs","createGallery","images","onImageClick","onCloseModalWindow","onBackdropClick","modalWindowSlider","dataForSlider","targetRef","closestLi","listImages","indexList","openModalWindow","onWindowKeydown","KEY_CODE_ESC"],"mappings":"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"}